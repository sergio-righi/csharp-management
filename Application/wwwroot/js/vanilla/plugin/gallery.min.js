(function(n,t){typeof define=="function"&&define.amd?define(t):typeof exports=="object"?module.exports=t():n.gallery=t()})(this,function(){function n(n,t){this.endX=0;this.index=0;this.items=[];this.startX=0;this.distance=300;this.animated=null;this.element=n;this.options=k({},{},t);this.init()}function u(){this.gallery=document.createElement("div");this.gallery.className="gallery-component";let t=document.createElement("div");t.className="gallery-overlay";this.wrapper=document.createElement("div");this.wrapper.className="gallery-content";this.content=document.createElement("div");this.content.className="gallery-items";let n=document.createElement("div");n.className="gallery-control";this.closeButton=document.createElement("div");this.closeButton.className="gallery-close";this.nextButton=document.createElement("div");this.nextButton.className="gallery-next";this.prevButton=document.createElement("div");this.prevButton.className="gallery-previous";n.appendChild(this.nextButton);n.appendChild(this.prevButton);n.appendChild(this.closeButton);this.wrapper.appendChild(this.content);this.gallery.appendChild(t);this.gallery.appendChild(this.wrapper);this.gallery.appendChild(n);document.body.appendChild(this.gallery)}function f(){this._events={arrowClick:h.bind(this),imageClick:o.bind(this),closeClick:s.bind(this),galleryDrag:l.bind(this),windowResize:c.bind(this),transitionEnd:y.bind(this),galleryMouseUp:v.bind(this),galleryMouseMove:a.bind(this)};for(var n in this.items)this.items[n].addEventListener("click",this._events.imageClick);window.addEventListener("resize",this._events.windowResize);this.closeButton.addEventListener("click",this._events.closeClick);this.prevButton.addEventListener("click",this._events.arrowClick.bind(this,"left"));this.nextButton.addEventListener("click",this._events.arrowClick.bind(this,"right"));this.content.addEventListener("dragstart",this._events.galleryDrag);this.content.addEventListener("mouseup",this._events.galleryMouseUp);this.content.addEventListener("mousemove",this._events.galleryMouseMove)}function e(){for(var n in this.items)this.items[n].removeEventListener("click",this._events.imageClick);window.removeEventListener("resize",this._events.windowResize);this.closeButton.removeEventListener("click",this._events.closeClick);this.prevButton.removeEventListener("click",this._events.arrowClick.bind(this,"left"));this.nextButton.removeEventListener("click",this._events.arrowClick.bind(this,"right"));this.content.removeEventListener("dragstart",this._events.galleryDrag);this.content.removeEventListener("mouseup",this._events.galleryMouseUp);this.content.removeEventListener("mousemove",this._events.galleryMouseMove)}function o(n){this.open(n.target)}function s(){this.close()}function h(n){n==="right"?this.next():n==="left"&&this.prev()}function c(){r.call(this)}function l(n){this.startX=n.pageX;n.preventDefault()}function a(n){this.endX=n.pageX;b.call(this)}function v(){w.call(this)}function y(){this.content.removeEventListener("animationend",this._events.transitionEnd);this.content.classList.remove("animation-transition");i&&(this.index=t,t===this.content.children.length-1?this.index=1:t===0&&(this.index=this.content.children.length-2),t!==this.index&&(this.content.style.transform=`translateX(-${this.width*this.index}px)`))}function r(){if(this.content.innerHTML="",this.element.nodeName==="IMG")this.items=this.add(this.element);else{let n=this;this.items=[].filter.call(this.element.querySelectorAll("img"),function(t){if(t.parentNode.nodeName!=="A")return n.add(t),t})}}function p(n){let i=n.cloneNode(!1),t=document.createElement("div");t.className="gallery-item";const r=dataStorage.get(n,"configuration");i.style.width=r.end.width+"px";i.style.height=r.end.height+"px";t.appendChild(i);this.content.appendChild(t);r.index=Array.prototype.slice.call(this.content.children).indexOf(t)}function w(){let n=(this.endX-this.startX)*2;this.startX>0&&(i=!1,n>this.distance?this.prev():n<-this.distance?this.next():(t=this.index,this.content.classList.add("animacao-transicao"),this.content.style.transform=`translateX(-${this.width*this.index}px)`,this.content.addEventListener("transitionend",this._events.transitionEnd)),this.startX=0)}function b(){if(this.startX>0){let n=this.index*this.width,t=this.endX-this.startX;n-t<=this.width*(this.content.children.length-1)&&(this.content.style.transform=`translateX(-${n-t}px)`)}}function k(){for(var t,n=1;n<arguments.length;n++)for(t in arguments[n])arguments[n].hasOwnProperty(t)&&(arguments[0][t]=arguments[n][t]);return arguments[0]}function d(n){const t=n.offset();return{index:-1,width:n.naturalWidth,height:n.naturalHeight,start:{top:t.top,left:t.left,width:n.offsetWidth,height:n.offsetHeight},end:g(n.naturalWidth,n.naturalHeight)}}function g(n,t){let r=Math.min(window.innerWidth/n,window.innerHeight/t),i={width:n*r,height:t*r};return{width:i.width,height:i.height,left:(window.innerWidth-i.width)/2+window.scrollX,top:(window.innerHeight-i.height)/2+window.scrollY}}let t=0,i=!1;return n.prototype.init=function(){return u.call(this),r.call(this),f.call(this),this},n.prototype.destroy=function(){this.component!==null&&(e.call(this),this.component.parentNode.removeChild(this.component),this.component=null)},n.prototype.open=function(n){let i=this;this.animated=n.cloneNode(!1);const t=dataStorage.get(n,"configuration");this.animated.style.zIndex="999";this.animated.style.position="absolute";this.animated.style.top=t.start.top+"px";this.animated.style.left=t.start.left+"px";this.animated.style.width=t.start.width+"px";this.animated.style.height=t.start.height+"px";document.body.appendChild(this.animated);this.animated.animate([{top:t.end.top+"px"},{left:t.end.left+"px"},{width:t.end.width+"px"},{height:t.end.height+"px"}],{duration:300});this.animated.parentNode.removeChild(this.animated);this.gallery.classList.add("fixed");this.gallery.classList.add("active")},n.prototype.close=function(){this.gallery.classList.remove("fixed");this.gallery.classList.remove("active")},n.prototype.add=function(n){let i=this,t=new Image;return t.src=n.src,t.onload=function(){dataStorage.put(n,"configuration",d(n));p.call(i,n)},this},n.prototype.moveTo=function(n){return i=!0,t=n,this.content.classList.add("animation-transition"),this.content.style.transform=`translateX(-${this.width*t}px)`,this.content.addEventListener("transitionend",this._events.transitionEnd),this},n.prototype.next=function(){return this.moveTo(this.index+1)},n.prototype.prev=function(){return this.moveTo(this.index-1)},Element.prototype.offset=function(){let n=this.getBoundingClientRect(),t=window.pageXOffset||document.documentElement.scrollLeft,i=window.pageYOffset||document.documentElement.scrollTop;return{top:n.top+i,left:n.left+t}},{init:n}});