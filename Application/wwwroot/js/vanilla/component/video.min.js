(function(n,t){typeof define=="function"&&define.amd?define(t):typeof exports=="object"?module.exports=t():n.video=t()})(this,function(){function n(n,t){this.timer=0;var i={closed:!1,loaded:!1,running:!1,theater:!1,undocked:!1,fullscreen:!1,quality:["Autom√°tico"],speed:[.25,.5,.75,1,1.25,1.5,2],connection:navigator.connection||navigator.mozConnection||navigator.webkitConnection};this.element=n;this.options=ii({},i,t);this.init()}function o(){this.component=document.createElement("div");this.component.className="video";this.component.innerHTML='<div class="video-container"><div class="video-button"><\/div><div class="video-poster"><\/div><div class="process"><div class="process-position"><svg class="process-circle" viewBox="25 25 50 50"><circle class="process-animation" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"><\/circle><\/svg><\/div><\/div><div class="toolbar"><div class="video-progress"><div class="bar-buffer"><\/div><div class="bar-progress"><div class="pointer-progress"><\/div><\/div><\/div><button class="button-control play"><\/button><div class="video-volume"><button class="button-control volume-high"><\/button><div class="volume-progress"><div class="bar-volume"><div class="pointer-volume"><\/div><\/div><\/div><\/div><div class="video-time"><span class="current">00:00<\/span><span class="separator"><\/span><span class="duration">00:00<\/span><\/div><button class="button-control configuration"><\/button><button class="button-control fullscreen"><\/button><\/div><div class="menu"><\/div><\/div>';this.element.parentNode.insertBefore(this.component,this.element.nextSibling);let n=this.component.querySelectorAll(".video-container")[0];n.children[0].parentNode.insertBefore(this.element,n.children[0])}function r(){return'<div class="configuration-item" role="menuitemcheckbox" data-property="loop"><div class="configuration-property">Loop<\/div><div class="configuration-control"><div class="switch"><input type="checkbox" id="chk_loop"'+(this.configurations.loop?" checked":"")+'/><label for="chk_loop"><\/label><\/div><\/div><\/div><div class="configuration-item" role="menuitemcheckbox" data-property="undocked"><div class="configuration-property">PIP<\/div><div class="configuration-control"><div class="switch"><input type="checkbox" id="chk_undocked"'+(this.options.closed?"":" checked")+'/><label for="chk_undocked"><\/label><\/div><\/div><\/div><div class="configuration-item" role="menuitem" data-property="speed"><div class="configuration-property">Speed<\/div><div class="configuration-control"><span>'+this.element.playbackRate+'<\/span><i class="mdi mdi-chevron-right"><\/i><\/div><\/div><div class="configuration-item" role="menuitem" data-property="quality"><div class="configuration-property">Quality<\/div><div class="configuration-control"><span>'+this.configurations.quality+'<\/span><i class="mdi mdi-chevron-right"><\/i><\/div><\/div>'}function s(){this._events={onplay:et.bind(this),onpause:ot.bind(this),onended:st.bind(this),onseeked:ht.bind(this),onwaiting:at.bind(this),onplaying:vt.bind(this),oncanplay:ct.bind(this),onprogress:lt.bind(this),loadeddata:yt.bind(this),ontimeupdate:pt.bind(this),elementClick:d.bind(this),volumeMouseEnter:it.bind(this),volumeMouseLeave:rt.bind(this),contentMouseMove:g.bind(this),contentMouseEnter:nt.bind(this),contentMouseLeave:tt.bind(this),progressMouseEnd:y.bind(this),progressMouseMove:v.bind(this),videoProgressMouseStart:l.bind(this),volumeProgressMouseStart:a.bind(this),closeClick:w.bind(this),volumeClick:ft.bind(this),controlClick:ut.bind(this),fullscreenClick:wt.bind(this),configurationClick:k.bind(this),menuClick:p.bind(this),contextMenu:h.bind(this),windowScroll:b.bind(this),exitFullscreen:c.bind(this)};this.element.addEventListener("play",this._events.onplay);this.element.addEventListener("pause",this._events.onpause);this.element.addEventListener("ended",this._events.onended);this.element.addEventListener("seeked",this._events.onseeked);this.element.addEventListener("waiting",this._events.onwaiting);this.element.addEventListener("playing",this._events.onplaying);this.element.addEventListener("canplay",this._events.oncanplay);this.element.addEventListener("progress",this._events.onprogress);this.element.addEventListener("loadeddata",this._events.loadeddata);this.element.addEventListener("loadedmetadata",this._events.onloadeddata);this.element.addEventListener("timeupdate",this._events.ontimeupdate);this.element.addEventListener("dblclick",this._events.fullscreenClick);this.element.addEventListener("click",this._events.elementClick);this.element.addEventListener("contextmenu",this._events.contextMenu);this.content.addEventListener("mousemove",this._events.contentMouseMove);this.content.addEventListener("mouseenter",this._events.contentMouseEnter);this.content.addEventListener("mouseleave",this._events.contentMouseLeave);this.poster.addEventListener("click",this._events.elementClick);this.control.addEventListener("click",this._events.controlClick);this.fullscreen.addEventListener("click",this._events.fullscreenClick);this.volume.addEventListener("mouseenter",this._events.volumeMouseEnter);this.volume.addEventListener("mouseleave",this._events.volumeMouseLeave);this.volume.children[1].addEventListener("mousedown",this._events.volumeProgressMouseStart);this.mute.addEventListener("click",this._events.volumeClick);this.configurations.pip&&(window.addEventListener("scroll",this._events.windowScroll),this.close.addEventListener("click",this._events.closeClick));this.menu.addEventListener("click",this._events.menuClick);this.configuration.addEventListener("click",this._events.configurationClick);this.progress.addEventListener("mousedown",this._events.videoProgressMouseStart);window.addEventListener("mouseup",this._events.progressMouseEnd);window.addEventListener("mousemove",this._events.progressMouseMove);document.addEventListener("fullscreenchange",this._events.exitFullscreen);document.addEventListener("webkitfullscreenchange",this._events.exitFullscreen);document.addEventListener("mozfullscreenchange",this._events.exitFullscreen);document.addEventListener("MSFullscreenChange",this._events.exitFullscreen)}function h(n){n.preventDefault()}function c(){document.fullscreenElement||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||(this.options.fullscreen=!1,this.content.classList.remove("fullscreen"))}function l(n){let t=n.pageX||n.touches[0].pageX,i=t-this.progress.children[1].offset().left;f.call(this,i);this.progress.classList.add("moving");this.progress.setAttribute("data-distance",t)}function a(n){let t=n.pageX||n.touches[0].pageX,i=t-this.volume.children[1].children[0].offset().left;e.call(this,i);this.volume.setAttribute("data-distance",t);this.volume.classList.add("moving")}function v(n){if(this.progress.classList.contains("moving")){i.call(this);let t=n.pageX||n.touches[0].pageX,r=parseInt(this.progress.dataset.distance,10),u=t-r+this.progress.children[1].clientWidth;f.call(this,u);this.progress.setAttribute("data-distance",t)}else if(this.volume.classList.contains("moving")){i.call(this);let t=n.pageX||n.touches[0].pageX,r=parseInt(this.volume.dataset.distance,10),u=t-r+this.volume.children[1].children[0].clientWidth;e.call(this,u);this.volume.setAttribute("data-distance",t)}}function y(){this.progress.classList.contains("moving")?(i.call(this),this.progress.classList.remove("moving")):this.volume.classList.contains("moving")&&(i.call(this),this.volume.classList.remove("moving"))}function p(n){if(n.target){let t=n.target.closestClass("configuration-item");if(n.target.classList.contains("configuration-header")||n.target.closestClass("configuration-header"))this.menu.innerHTML=r.call(this);else if(t!==null&&t.hasAttribute("role")){const n=t.getAttribute("role");if(n==="menuitem")if(t.dataset.value===undefined){let n="";t.dataset.property==="speed"?n=this.options.speed.getSubmenu("Speed",this.element.playbackRate,"speed"):t.dataset.property==="quality"&&(n=this.options.quality.getSubmenu("Quality",this.configuration.quality,"quality"));this.menu.innerHTML=n}else t.dataset.property==="speed"?this.element.playbackRate=parseFloat(t.dataset.value,10):t.dataset.property==="quality"&&this.setSource(t.dataset.value),this.menu.innerHTML=r.call(this);else if(n==="menuitemcheckbox"){let n=t.querySelectorAll("input[type=checkbox]")[0].checked;t.dataset.property==="loop"?this.configurations.loop=n:t.dataset.property==="undocked"&&(this.options.closed=!n)}}}}function w(){this.element.pause();this.options.closed=!0;this.options.undocked=!1;this.element.removeAttribute("style");this.content.classList.remove("undocked")}function b(){this.options.running&&!this.options.closed&&(this.component.inViewport()||this.options.undocked?this.component.inViewport()&&(this.options.undocked=!1,this.component.removeAttribute("style"),this.content.classList.remove("undocked")):(this.options.undocked=!0,this.component.style.height=this.element.clientHeight+"px",this.content.classList.add("undocked"),this.menu.classList.remove("active")))}function k(){this.menu.innerHTML=r.call(this);this.menu.classList.contains("active")?this.menu.classList.remove("active"):this.menu.classList.add("active")}function d(){this.options.undocked?scrollTo(this.element,0,0):this.menu.classList.contains("active")?this.menu.classList.remove("active"):(this.poster.classList.remove("active"),t.call(this))}function g(){if(this.options.loaded)if(this.options.fullscreen){let n=this;clearTimeout(this.timer);this.timer=setTimeout(function(){n.options.running&&(n.content.classList.add("c-none"),n.control.classList.remove("active"))},2e3);this.toolbar.classList.add("active");this.content.classList.remove("c-none")}else clearTimeout(this.timer),this.toolbar.classList.add("active"),this.content.classList.remove("c-none")}function nt(){!this.options.loaded||this.options.fullscreen||this.menu.classList.contains("active")||this.toolbar.classList.add("active")}function tt(){this.options.loaded&&!this.options.fullscreen&&this.options.running&&!this.menu.classList.contains("active")&&this.toolbar.classList.remove("active")}function it(){this.volume.classList.add("active")}function rt(){let n=this.volume;n.classList.contains("moving")||n.classList.remove("active")}function ut(){t.call(this)}function ft(n){let t="";this.element.muted?(this.volume.children[1].children[0].style.width=`${this.options.volume*100}%`,this.element.muted=!1,this.element.volume=this.options.volume,t="volume-high"):(this.options.volume=this.element.volume,this.volume.children[1].children[0].style.width="0px",this.element.muted=!0,this.element.volume=0,t="volume-off");n.target.classList.remove("volume-off");n.target.classList.remove("volume-low");n.target.classList.remove("volume-medium");n.target.classList.remove("volume-high");n.target.classList.add(t)}function et(){this.options.running=!0;this.poster.classList.remove("active");this.control.classList.add("pause");this.control.classList.remove("play");this.control.classList.remove("replay")}function ot(){this.options.running=!1;this.control.classList.add("play");this.control.classList.remove("pause");this.control.classList.remove("replay")}function st(){this.configurations.loop?t.call(this,!0):(this.options.running=!1,this.control.classList.add("replay"),this.control.classList.remove("play"),this.control.classList.remove("pause"),this.configurations.poster?(this.poster.classList.add("active"),this.toolbar.classList.remove("active")):this.toolbar.classList.add("active"))}function ht(){this.options.loaded=!0;this.options.running=!1;u.call(this)}function ct(){this.configurations.autoplay&&!this.options.running&&t.call(this,!0)}function lt(){this.options.loaded&&u.call(this)}function at(){this.options.running=!1;this.process.classList.add("active")}function vt(){this.options.running=!0;this.process.classList.remove("active")}function yt(){let n=this.time.children;this.element.currentTime=this.configurations.time;n[2].textContent=this.element.duration.toTimeString();n[0].textContent=this.element.currentTime.toTimeString()}function pt(){this.options.loaded&&(this.progress.children[1].style.width=`${100/this.element.duration*this.element.currentTime}% `,this.time.children[0].textContent=this.element.currentTime.toTimeString())}function wt(){ti.call(this)}function bt(){this.component.removeEventListener("click",this._events.methodFunction)}function kt(){let n=this;this.element.dataset.quality!==undefined&&this.options.quality.push.apply(this.options.quality,this.element.dataset.quality.split(","));this.configurations={poster:null,pip:n.element.dataset.pip!==undefined,loop:n.element.dataset.loop!==undefined,autoplay:n.element.dataset.autoplay!==undefined,quality:n.options.quality[n.options.quality.length-1],src:n.element.dataset.src!==undefined?n.element.src:null,time:n.element.dataset.time!==undefined?n.element.dataset.time:0,next:n.element.dataset.next!==undefined?n.element.dataset.next:null,volume:n.element.dataset.volume!==undefined?n.element.dataset.volume:1}}function dt(){this.options.connection.downlink<1?this.setSource(this.options.quality[1]):this.options.connection.downlink<2?this.setSource(this.options.quality[2]):this.options.connection.downlink<5?this.setSource(this.options.quality[3]):this.setSource(this.options.quality[3])}function gt(){this.content=this.component.children[0];let n=this.content.children;this.close=n[1];this.poster=n[2];this.process=n[3];this.toolbar=n[4];this.menu=n[5];n=this.toolbar.children;this.progress=n[0];this.control=n[1];this.volume=n[2];this.time=n[3];this.current=this.time.children[0];this.mute=this.volume.children[0];this.configuration=n[4];this.fullscreen=n[5]}function ni(){this.configurations.poster===null&&(this.poster.style.backgroundSize="cover",this.poster.style.backgroundRepeat="no-repeat",this.configurations.poster=`${this.element.dataset.path} cover.jpg`,this.poster.style.backgroundImage=`url('${this.configurations.poster}')`);this.running||this.poster.classList.add("active")}function ti(){document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?(document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen(),this.options.fullscreen=!1,this.content.classList.remove("fullscreen")):(this.component.requestFullscreen?this.component.requestFullscreen():this.element.msRequestFullscreen?this.component.msRequestFullscreen():this.element.mozRequestFullScreen?this.component.mozRequestFullScreen():this.element.webkitRequestFullscreen&&this.component.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT),this.options.fullscreen=!0,this.content.classList.add("fullscreen"))}function u(){let t=this.element.duration,n=this.element.buffered;if(n){let i=n.end(0),r=i/t*100;this.progress.children[0].style.width=r+"%"}}function t(n){this.options.loaded&&(this.element.paused&&!this.running||n?this.element.play():this.element.pause())}function i(){document.selection?document.selection.empty():window.getSelection().removeAllRanges()}function f(n){let t=this.progress.clientWidth;n=Math.max(n>=t?t:n,0);let i=Math.max(n/t,0);this.progress.children[1].style.width=`${i*100}% `;let r=i*this.element.duration;this.element.currentTime=r;this.current.textContent=r.toTimeString()}function e(n){let t=this.volume.children[1].clientWidth;n=Math.max(n>=t?t:n,0);let i=Math.max(n/t,0);this.volume.children[1].children[0].style.width=`${i*100}% `;this.element.volume=i}function ii(){for(var t,n=1;n<arguments.length;n++)for(t in arguments[n])arguments[n].hasOwnProperty(t)&&(arguments[0][t]=arguments[n][t]);return arguments[0]}return n.prototype.init=function(){if(this.element!==undefined)return kt.call(this),dt.call(this),o.call(this),gt.call(this),ni.call(this),s.call(this),this},n.prototype.destroy=function(){this.component!==null&&(bt.call(this),this.component.parentNode.removeChild(this.component),this.component=null)},n.prototype.setSource=function(n){this.loaded=!1;this.running=!1;let t=`${this.element.dataset.path}/${n}/${this.element.dataset.src}`,i=this.element.currentTime;this.element.src=t;this.configurations.time=i;this.configurations.quality=n},Element.prototype.closestClass=function(n){let t=this;while((t=t.parentElement)&&!t.classList.contains(n));return t},Element.prototype.inViewport=function(){let n={top:window.pageYOffset,left:window.pageXOffset};n.right=n.left+window.innerWidth;n.bottom=n.top+window.innerHeight;let t=this.offset();return t.right=t.left+this.clientWidth,t.bottom=t.top+this.clientHeight,!(n.right<t.left||n.left>t.right||n.bottom<t.top||n.top>t.bottom)},Element.prototype.offset=function(){let n=this.getBoundingClientRect(),t=window.pageXOffset||document.documentElement.scrollLeft,i=window.pageYOffset||document.documentElement.scrollTop;return{top:n.top+i,left:n.left+t}},Number.prototype.toTimeString=function(){let n=new Date(null);return(n.setSeconds(this),this>=86400)?n.toISOString().substr(11,8):n.toISOString().substr(14,5)},Array.prototype.getSubmenu=function(n,t,i){let r=['<div class="configuration-header"><div class="configuration-label">'+n+'<\/div><\/div><div class="configuration-content">'];return[].forEach.call(this,function(n){r.push('<div class="configuration-item'+(n===t?" selected":"")+'" role="menuitem" data-property="'+i+'" data-value="'+n+'"> <div class="configuration-control"><span>'+n+"<\/span><\/div><\/div>")}),r.push("<\/div><\/div>"),r.join("")},{init:n}});