(function(n,t){typeof define=="function"&&define.amd?define(t):typeof exports=="object"?module.exports=t():n.alphabetic=t()})(this,function(){function n(n,t){this.items=[];this.busy=!1;this.characters=[];this.selected=null;this.touchStarted=!1;this.element=n;this.options=v({},{selector:"",onCreate:null,shortcut:!0,highlight:!0,navigation:!0,highlightClass:"active"},t);this.init()}function r(){let i=this,t=[],n="";this.items=Array.prototype.slice.call(this.element.querySelectorAll(this.options.selector),0);Array.prototype.sort.call(this.items,function(n,t){let i=n.dataset.title.trim(),r=t.dataset.title.trim();return i.toString().toUpperCase().localeCompare(r.toString().toUpperCase())});Array.prototype.forEach.call(this.items,function(r){let u=r.dataset.title.substring(0,1).toUpperCase().toISO();n!==u&&(n=u,i.characters.push(n),t.push(`<div class="title-item" data-header="${n.toUpperCase()}">${n.toUpperCase()}</div>`));t.push(r.outerHTML)});this.element.innerHTML=t.join("")}function u(){this.navigation=document.createElement("div");this.navigation.className="alphabetic";let n=[];for(let t=0;t<this.characters.length;t++)n.push(`<div class="navigation-item" data-nav="${this.characters[t]}">${this.characters[t]}</div>`);this.navigation.innerHTML=n.join("");this.element.parentNode.insertBefore(this.navigation,this.element.parentNode.firstElementChild)}function f(){this._events={windowScroll:o.bind(this),windowKeyDown:s.bind(this),navigationMouseUp:h.bind(this),navigationTouchEnd:l.bind(this),navigationTouchMove:a.bind(this),navigationTouchStart:c.bind(this)};this.options.highlight&&window.addEventListener("scroll",this._events.windowScroll);this.options.shortcut&&window.addEventListener("keydown",this._events.windowKeyDown);this.options.navigation&&(this.navigation.addEventListener("mouseup",this._events.navigationMouseUp),this.navigation.addEventListener("touchend",this._events.navigationTouchEnd),this.navigation.addEventListener("touchmove",this._events.navigationTouchMove),this.navigation.addEventListener("touchstart",this._events.navigationTouchStart))}function e(){this.options.highlight&&window.removeEventListener("scroll",this._events.windowScroll);this.options.shortcut&&window.removeEventListener("keydown",this._events.windowKeyDown);this.options.navigation&&(this.navigation.removeEventListener("mouseup",this._events.navigationMouseUp),this.navigation.removeEventListener("touchend",this._events.navigationTouchEnd),this.navigation.removeEventListener("touchmove",this._events.navigationTouchMove),this.navigation.removeEventListener("touchstart",this._events.navigationTouchStart))}function o(){if(!this.busy)for(let n=this.characters.length-1;n>=0;n--){let t=document.querySelectorAll(`[data-header="${this.characters[n]}"]`)[0];if(t!==undefined){const i=t.getBoundingClientRect().top+document.documentElement.scrollTop;if(window.pageYOffset>=i-t.outerHeight()){this.setHighlight(this.characters[n]);break}}}}function s(n){if(n.altKey){let r=n.which,i=String.fromCharCode(r);this.characters.indexOf(i)!==-1&&this.moveTo(i,t.DURATION)}}function h(n){!this.touchStarted&&n.target&&n.target.className==="navigation-item"&&this.moveTo(n.target.dataset.nav,t.DURATION)}function c(){this.selected=null;this.touchStarted=!0}function l(){this.touchStarted=!1;this.selected!==null&&(this.moveTo(this.selected.dataset.nav,10),this.selected=null)}function a(n){if(this.touchStarted){n.preventDefault();let t=document.elementFromPoint(n.touches[0].clientX,n.touches[0].clientY);typeof t!==undefined&&(this.selected=t,this.moveTo(t.dataset.nav,10))}}function v(){for(var t,n=1;n<arguments.length;n++)for(t in arguments[n])arguments[n].hasOwnProperty(t)&&(arguments[0][t]=arguments[n][t]);return arguments[0]}function i(n,t,r,u){if(!(r<=0)){var f=t-n.scrollTop,e=f/r*10;setTimeout(function(){if(n.scrollTop=n.scrollTop+e,n.scrollTop===t){u();return}i(n,t,r-10,u)},10)}}const t={DURATION:300};return n.prototype.init=function(){if(this.element!==undefined)return r.call(this),this.options.navigation&&(u.call(this),f.call(this)),typeof this.options.onCreate=="function"&&this.options.onCreate.call(this),this},n.prototype.destroy=function(){this.component!==null&&(e.call(this),this.component.parentNode.removeChild(this.component),this.component=null)},n.prototype.setSituation=function(n,t,i){let r=document.querySelectorAll(`[data-header="${n}"]`)[0];if(r!==undefined&&(t?r.classList.add(i):r.classList.remove(i)),this.options.navigation){let r=document.querySelectorAll(`[data-nav="${n}"]`)[0];r!==undefined&&(t?r.classList.add(i):r.classList.remove(i))}return this},n.prototype.setHighlight=function(n){if(this.options.highlight){let t=document.querySelectorAll(`[data-header].${this.options.highlightClass}`)[0];t!==undefined&&t.classList.remove(this.options.highlightClass);let i=this.element.querySelectorAll(`[data-header="${n}"]`)[0];if(i!==undefined&&i.classList.add(this.options.highlightClass),this.options.navigation){let t=document.querySelectorAll(`[data-nav].${this.options.highlightClass}`)[0];t!==undefined&&t.classList.remove(this.options.highlightClass);let i=document.querySelectorAll(`[data-nav="${n}"]`)[0];i!==undefined&&i.classList.add(this.options.highlightClass)}}},n.prototype.moveTo=function(n,t){if(!this.busy){let r=this.element.querySelectorAll(`[data-header="${n}"]`)[0];if(r!==undefined){let u=this;u.busy=!0;i(document.documentElement,r.offsetTop,t,function(){u.setHighlight(n);setTimeout(function(){u.busy=!1},100)})}}},String.prototype.toISO=function(){return this.replace(new RegExp("[ÁÀÂÃÄ]","gi"),"A").replace(new RegExp("[ÉÈÊË]","gi"),"E").replace(new RegExp("[ÍÌÎÏ]","gi"),"I").replace(new RegExp("[ÓÒÔÕÖ]","gi"),"O").replace(new RegExp("[ÚÙÛÜ]","gi"),"U").replace(new RegExp("[Ç]","gi"),"C")},Element.prototype.outerHeight=function(){let n=window.getComputedStyle(this),t=parseFloat(n.marginTop,10)+parseFloat(n.marginBottom,10);return Math.ceil(this.offsetHeight+t)},{init:n}});