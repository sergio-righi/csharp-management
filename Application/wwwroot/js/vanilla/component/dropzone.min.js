(function(n,t){typeof define=="function"&&define.amd?define(t):typeof exports=="object"?module.exports=t():n.dropzone=t()})(this,function(){function i(n,t){this.windowInitialized=!1;this.overlayInitialized=!1;this.dropzoneInitialized=!1;this.element=n;this.options=vt({},{url:"",max:null,base:1024,parallel:1,accept:"*",onFind:null,onError:null,maxSize:null,onCancel:null,onUpload:null,onRemove:null,method:"POST",clickable:null,removable:!0,multiple:!1,message:{click:" ou clique",icon:"cloud-upload",empty:"Para realizar o envio dos arquivos solte-os nesta área",error:{icon:"error",url:"Nenhuma URL foi informada",quantity:"O limite máximo de {quantity} arquivos foi atingido",accept:"Arquivos do tipo {extension} não são aceitos, somente {accept}",size:"O arquivo {name} possui tamanho maior que o limite permitido {size}",multiple:"Não é permitido selecionar/soltar de multiplos arquivos ao mesmo tempo"},confirm:{remove:"Você tem certeza?",resend:"Tentar enviar este arquivo novamente?"}}},t);this.init()}function s(){if(this.drozone=document.createElement("div"),this.drozone.className="dropzone-overlay",this.drozone.setAttribute("data-message",this.options.message.empty),this.options.clickable!==null){this.dropzoneFileUpload=document.createElement("input");this.dropzoneFileUpload.setAttribute("type","file");this.options.multiple&&this.dropzoneFileUpload.setAttribute("multiple",!0);this.dropzoneFileUpload.className="dropzone-file-uploader";let n=this.options.clickable===!0?this.element:document.querySelectorAll(this.options.clickable)[0];n.insertBefore(this.dropzoneFileUpload,n.firstElementChild)}this.dropzoneFileUpload===undefined?this.element.insertBefore(this.drozone,this.element.firstChild):(this.drozone.classList.add("full"),this.drozone.classList.add("d-none"),document.body.appendChild(this.drozone))}function h(){let t=document.createElement("div");t.className="dropzone-upload d-none";let n=document.createElement("div");n.className="upload-header active";let i=document.createElement("div");i.className="header-label";i.innerHTML="Lista de arquivos";let r=document.createElement("div");r.className="header-icon close";let u=document.createElement("div");u.className="header-icon arrow";n.appendChild(i);n.appendChild(u);n.appendChild(r);let f=document.createElement("div");f.className="upload-content active";t.appendChild(n);t.appendChild(f);window.dropzone._dropzoneQueue=t;window.dropzone._dropzoneQueueLabel=i;window.dropzone._dropzoneQueueHeader=n;window.dropzone._dropzoneQueueClose=r;window.dropzone._dropzoneQueueContent=f;window.dropzone._dropzoneQueueToggle=u;document.body.appendChild(t)}function c(){let n=document.createElement("div");n.className="dropzone-overlay-message d-none";window.dropzone._dropzoneMessage=n;document.body.appendChild(n)}function l(n,t,i){let u=document.createElement("div");u.className="dropzone-item";let r=document.createElement("div");r.className="item-info";let f=document.createElement("div");f.className="item-name";f.innerHTML=`<i class="file-icon-${t.toLowerCase()}"></i> ${n.toLowerCase()}`;let e=document.createElement("div");e.className="item-size";e.innerHTML=i;r.appendChild(f);r.appendChild(e);let s=document.createElement("div");s.className="item-control";r.appendChild(s);let o=document.createElement("div");o.className="progress";let h=document.createElement("div");return h.className="bar",o.appendChild(h),u.appendChild(r),u.appendChild(o),u}function a(){this._g_events={windowSubmit:v.bind(this),closeQueue:b.bind(this),toggleQueue:w.bind(this),windowBeforeUnload:y.bind(this),removeFromQueue:p.bind(this)};window.addEventListener("submit",this._g_events.windowSubmit);window.addEventListener("beforeunload",this._g_events.windowBeforeUnload);window.dropzone._dropzoneQueueClose.addEventListener("click",this._g_events.closeQueue);window.dropzone._dropzoneQueueHeader.addEventListener("click",this._g_events.toggleQueue);window.dropzone._dropzoneQueueContent.addEventListener("click",this._g_events.removeFromQueue)}function v(n){window.dropzone._running&&n.preventDefault()}function y(){if(window.dropzone._running)return""}function p(n){if(n.target&&n.target.classList.contains("item-control")){let t=n.target.closestClass("dropzone-item");t.classList.contains("error")?ct.call(this,n.target):t.classList.contains("success")?typeof this.options.onFind=="function"&&this.options.onFind.call(this,n.target):ht.call(this,n.target)}}function w(){window.dropzone._dropzoneQueueHeader.classList.toggle("active");window.dropzone._dropzoneQueueContent.classList.toggle("active")}function b(t){t.preventDefault();window.dropzone._running?([].forEach.call(window.dropzone._queue,function(t){t.situation!==n.SENDED&&t.request.abort()}),window.dropzone._quantity=0,window.dropzone._queue=[],f.call(this)):window.dropzone._dropzoneQueue.classList.add("d-none")}function k(){this._events={fileUpload:g.bind(this),windowDrop:nt.bind(this),overlayDrop:rt.bind(this),windowDragover:tt.bind(this),windowDragleave:it.bind(this),overlayDragenter:ut.bind(this),overlayDragleave:ft.bind(this)};window.addEventListener("drop",this._events.windowDrop);window.addEventListener("dragover",this._events.windowDragover);window.addEventListener("dragleave",this._events.windowDragleave);this.options.clickable!==null&&this.dropzoneFileUpload.addEventListener("change",this._events.fileUpload);this.drozone.addEventListener("drop",this._events.overlayDrop);this.drozone.addEventListener("dragenter",this._events.overlayDragenter);this.drozone.addEventListener("dragleave",this._events.overlayDragleave)}function d(){window.removeEventListener("drop",this._events.windowDrop);window.removeEventListener("dragover",this._events.windowDragover);window.removeEventListener("dragleave",this._events.windowDragleave);this.options.clickable!==null&&this.dropzoneFileUpload.removeEventListener("change",this._events.fileUpload);this.drozone.removeEventListener("drop",this._events.overlayDrop);this.drozone.removeEventListener("dragenter",this._events.overlayDragenter);this.drozone.removeEventListener("dragleave",this._events.overlayDragleave)}function g(n){let t=this;[].forEach.call(n.target.files,function(n){r.call(t,n)})}function nt(n){n.preventDefault();this.windowInitialized=!1;this.overlayInitialized=!1;this.dropzoneInitialized=!1;this.drozone.classList.add("d-none")}function tt(n){if(o(n)){if(n.preventDefault(),this.windowInitialized)return;this.windowInitialized=!0;this.drozone.classList.remove("d-none")}}function it(){this.overlayInitialized||this.dropzoneInitialized||(this.windowInitialized=!1,this.drozone.classList.add("d-none"))}function rt(n){n.preventDefault();let t=n.dataTransfer.files;if(!this.options.multiple&&t.length===1||this.options.multiple){let n=this;[].forEach.call(t,function(t){t.type!==""&&r.call(n,t)})}else e.call(this,this.options.message.error.multiple);n.target.classList.remove("hover")}function ut(n){if(o(n)){if(this.overlayInitialized)return;n.target.classList.add("hover");this.overlayInitialized=!0}}function ft(n){n.target.classList.remove("hover");this.overlayInitialized=!1}function r(n){let t=null;if(this.options.url.length>0)if(this.options.max===null||this.options.max>window.dropzone._quantity){const i=n.size/Math.pow(this.options.base,2),r=n.size.toSizeString(this.options.base);if(this.options.maxSize===null||i<=this.options.maxSize){const i=n.name.substr(n.name.lastIndexOf(".")+1).toLowerCase();if(this.options.accept==="*"||this.options.accept.indexOf(i)!==-1){let t=this;window.dropzone._dropzoneQueue.classList.remove("d-none");window.dropzone._quantity++;let u=new FileReader;u.onload=function(n){return function(){let u=l.call(t,n.name,i,r);window.dropzone._dropzoneQueueContent.insertBefore(u,window.dropzone._dropzoneQueueContent.firstChild);et.call(t,u,n)}}(n);u.readAsDataURL(n)}else t=this.options.message.error.accept.format({extension:i,accept:this.options.accept.join(", ")})}else t=this.options.message.error.size.format({name:nomeArquivo,size:(this.options.max*Math.pow(this.options.base,2)).toSizeString(this.options.base)})}else t=this.options.message.error.quantity.format({quantity:this.options.quantity});else t=this.options.message.error.url;e.call(this,t)}function et(t,i){const r=Math.floor(Date.now());let f=new FormData;f.append("file",i);f.append("key",r);let e=u.call(this,t),o={key:r,data:f,request:e,situation:n.WAITING};t.setAttribute("data-key",r);window.dropzone._queue.push(o)}function u(t){let i=this,r=new XMLHttpRequest,u=t.querySelectorAll(".bar")[0];return r.open(this.options.method,this.options.url),r.upload.addEventListener("progress",function(n){n.lengthComputable&&(u.style.width=parseInt(n.loaded/n.total*100,10)+"%")},!1),r.onload=function(){let r=window.dropzone._queue.getByKey(t.dataset.key);this.status===200?(t.classList.add("success"),r.situation=n.SENDED,typeof i.options.onUpload=="function"&&i.options.onUpload.call(i,r)):(t.classList.add("error"),r.situation=n.ERROR,typeof i.options.onError=="function"&&i.options.onError.call(i,r),t.querySelectorAll(".item-control")[0].setAttribute("title",this.statusText))},r}function ot(){let t=this;window.dropzone._running||(window.dropzone._running=!0,window.dropzone._timer=setInterval(function(){if(lt.call(this),window.dropzone._queue.filterBySituation(n.WAITING).length>0&&window.dropzone._queue.filterBySituation(n.SENDING).length<t.options.parallel){let t=window.dropzone._queue.getNext();t.request.send(t.data);t.situation=n.SENDING}},1e3))}function st(){let t=this;window.dropzone._queue=[];setInterval(function(){window.dropzone._queue.filterBySituation(n.WAITING).length>0?ot.call(t):(window.dropzone._running=!1,clearInterval(window.dropzone._timer))},2e3)}function ht(t){let i=confirm(this.options.message.confirm.remove);if(i){let i=t.closestClass("dropzone-item");const r=window.dropzone._queue.getByKey(i.dataset.key);if(r.index!==-1){let t=r.object;t.situation===n.SENDING?typeof this.options.onRemove=="function"&&this.options.onRemove.call(this,t):t.situation!==n.WAITING&&(t.request.abort(),typeof this.options.onCancel=="function"&&this.options.onCancel.call(this,t));window.dropzone._quantity--;window.dropzone._queue.splice(r.index,1);i.parentNode.removeChild(i);f.call(this)}}}function ct(t){let i=confirm(this.options.message.confirm.resend);if(i){let i=t.closestClass("dropzone-item");i.classList.remove("error");i.querySelectorAll(".bar")[0].style.width=0;const r=window.dropzone._queue.getByKey(i.dataset.key);if(r.index!==-1){let t=r.object;t.situation=n.WAITING;t.request=u.call(this,i)}}}function f(){window.dropzone._quantity===0?window.dropzone._dropzoneQueue.classList.add("d-none"):window.dropzone._dropzoneQueue.classList.remove("d-none")}function lt(){let t=null;const i=window.dropzone._queue.filterBySituation(n.ERROR);if(i.length===0){const f=window.dropzone._queue.filterBySituation(n.SENDED),r=window.dropzone._queue.filterBySituation(n.SENDING),u=window.dropzone._queue.filterBySituation(n.WAITING);f.length+i.length===window.dropzone._queue.length?t="Todos os arquivos foram enviados":u.length>0?t=`Existem ${u.length} arquivo(s) na fila para envio`:r.length>0&&(t=`Existem ${r.length} arquivo(s) sendo enviado(s)`)}else t=`Ocorreu um error ao tentar enviar ${i.length} arquivo(s)`;window.dropzone._dropzoneQueueLabel.innerHTML=t}function at(){this.element===null?window.dropzone._dropzoneMessage.classList.add("d-none"):(this.drozone.classList.remove("error"),this.drozone.setAttribute("data-message",this.options.message.empty))}function e(n){n!==null&&(this.element===null?(window.dropzone._dropzoneMessage.innerHTML=n,window.dropzone._dropzoneMessage.classList.remove("d-none")):(this.drozone.classList.add("error"),this.drozone.setAttribute("data-message",n)),setTimeout(at.bind(this),3e3))}function vt(){for(var t,n=1;n<arguments.length;n++)for(t in arguments[n])arguments[n].hasOwnProperty(t)&&(arguments[0][t]=arguments[n][t]);return arguments[0]}function o(n){return n.dataTransfer.types&&(n.dataTransfer.types.indexOf?n.dataTransfer.types.indexOf("Files")!==-1:n.dataTransfer.types.contains("Files"))}const n={WAITING:0,SENDING:1,SENDED:2,ERROR:3},t={BYTE:"B",KILOBYTE:"KB",MEGABYTE:"MB",GIGABYTE:"GB"};return window.dropzone={_timer:0,_queue:[],_quantity:0,_running:!1,_dropzoneQueue:null,_dropzoneMessage:null,_dropzoneQueueLabel:null,_dropzoneQueueClose:null,_dropzoneQueueToggle:null,_dropzoneQueueHeader:null,_dropzoneQueueContent:null},i.prototype.init=function(){return s.call(this),window.dropzone._dropzoneQueue===undefined&&(h.call(this),c.call(this),st.call(this),a.call(this)),k.call(this),this},i.prototype.destroy=function(){this.drozone!==null&&(d.call(this),this.drozone.parentNode.removeChild(this.drozone),window.dropzone._dropzoneQueue.parentNode.removeChild(window.dropzone._dropzoneQueue),window.dropzone._dropzoneMessage.parentNode.removeChild(window.dropzone._dropzoneMessage),this.dropzone=null)},Element.prototype.closestClass=function(n){let t=this;while((t=t.parentElement)&&!t.classList.contains(n));return t},Array.prototype.getNext=function(){let t=null;return[].forEach.call(this,function(i){if(i.situation===n.WAITING){t=i;return}}),t},Array.prototype.getByKey=function(n){let t={object:null,index:-1};return[].forEach.call(this,function(i,r){if(i.key===parseInt(n,10)){t.index=r;t.object=i;return}}),t},Array.prototype.filterBySituation=function(n){let t=Array.isArray(n);return[].filter.call(this,function(i){if(!t&&i.situation===n||t&&n.indexOf(i.situation)!==-1)return i})},String.prototype.format=function(n){return this.replace(/{([^{}]*)}/g,function(t,i){return typeof n[i]=="string"||typeof n[i]=="number"?n[i]:t})},Number.prototype.toSizeString=function(n){let r=this,i=Math.pow(n,3);return r/i>=1?(r/i).toFixed(1)+t.GIGABYTE:(i/=n,r/i>=1)?(r/i).toFixed(1)+t.MEGABYTE:(i/=n,r/i>=1)?(r/i).toFixed(1)+t.KILOBYTE:r+t.BYTE},{init:i}});